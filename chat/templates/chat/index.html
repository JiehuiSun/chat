<!-- chat/templates/chat/index.html -->
<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8"/>
            <title>Chat Rooms</title>
          </head>
          <body>
            <p>Your name: {{ username }} | <a href="/">Logout</a></p>
            <table id="chat">
              <tr>
                <td><b>roomname</b></td>

              </tr>
              {% for room in room_list %}
                <tr>
                  <td id="{{ room.label }}" class="room">{{ room.room_name }}</td>
                </tr> 
              {% endfor %}
            </table>
            <br/>
            What chat room would you like to enter?<br/>
            <input id="room-name-input" type="text" size="100"/><br/>
            <input id="room-name-submit" type="button" value="Enter"/>

            <script>
              document.querySelector('#room-name-input').focus();
              document.querySelector('#room-name-input').onkeyup = function(e) {
              if (e.keyCode === 13) {  // enter, return
                  document.querySelector('#room-name-submit').click();
              }
            };

            document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            var roomList = document.getElementsByClassName('room')
              for (var i = 0; i<roomList.length; i++){
                if (roomList[i].innerText == roomName) {
                  window.location.pathname = '/chat/' + roomList[i].id + '/' + {{ username }} + "/";
                }else{
                  window.location.pathname = '/chat/' + roomName + '/' + {{ username }} + "/";
                }
              }

            };
    </script>
  </body>
</html>
