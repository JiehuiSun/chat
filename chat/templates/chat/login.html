<!-- chat/templates/chat/login.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Chat Login</title>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
  </head>
    <body>
      <p>Username: <input id="username" type="text" size="20"/><br/></p>
      <p>Password: <input id="password" type="password" size="20"/><br/></p>
      <input id="login" type="button" value="Enter"/>
      <p id="err-info"></p>

      <script>
      $("#login").click(function () {
        var username = document.querySelector('#username').value;
        var password = document.querySelector('#password').value;
        $.ajax({
          url:"/chat/user_login",
          type:"POST",
          data:{"username": username, "password": password},
          success:function(data){

          if (data["code"] == 0){
            var url = "/chat/" + "?username=" + username
            $(location).attr('href', url)
          }else{
            $("#err-info").text("Username or Password Err")
          }
          }
      })

      });
    </script>
  </body>
</html>
